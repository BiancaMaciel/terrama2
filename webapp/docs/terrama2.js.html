<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: terrama2.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: terrama2.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @class TerraMA2 - Main class of the API. */
var TerraMA2 = function(terrama2Url, components) {

  var _this = this;

  var componentsLength = components.length;

  var config = null;
  var mapDisplay = null;
  var layerExplorer = null;
  var toolBox = null;
  var leftBar = null;

  /**
   * Return the length of the components array
   * @returns {number} componentsLength - length of the components array
   */
  this.getComponentsLength = function() {
    return componentsLength;
  };

  /**
   * Return the Config object
   * @returns {Config} config - Config object
   */
  this.getConfig = function() {
    return config;
  };

  /**
   * Return the MapDisplay object
   * @returns {MapDisplay} mapDisplay - MapDisplay object
   */
  this.getMapDisplay = function() {
    return mapDisplay;
  }

  /**
   * Return the LayerExplorer object
   * @returns {LayerExplorer} layerExplorer - LayerExplorer object
   */
  this.getLayerExplorer = function() {
    return layerExplorer;
  }

  /**
   * Return the url to the TerraMA² web API
   * @returns {string} terrama2Url - url to the TerraMA² web API
   */
  this.getTerrama2Url = function() {
    return terrama2Url;
  }

  /**
   * Inject a stylesheet to the page
   * @param {string} url - url to the stylesheet
   */
  this.injectStylesheet = function(url) {
    var link = $("&lt;link>", { rel: "stylesheet", type: "text/css", href: url });

    link.appendTo('head');
  }

  /**
   * Verifies if a given file exist
   * @param {string} url - url to the file
   * @return {boolean}
   */
  this.fileExists = function(url) {
    $.ajax({
      url: url,
      async: false,
      error: function() {
        return false;
      },
      success: function() {
        return true;
      }
    });
  }

  /**
   * Apply a given CQL filter to a given layer
   * @param {string} cql - CQL filter to be applied
   * @param {string} layerName - layer name to be filtered
   */
  this.applyCQLFilter = function(cql, layerName) {
    mapDisplay.findBy(mapDisplay.getMap().getLayerGroup(), 'name', layerName).getSource().updateParams({ "CQL_FILTER": cql });
  }

  /**
   * Load the TerraMA² components present in the components array
   * @param {number} i - current array position
   */
  var loadComponents = function(i) {
    if(i &lt; componentsLength) {
      $.ajax({
        url: terrama2Url + "/javascripts/components/" + config.getConfJsonComponentsJs()[components[i]],
        dataType: "script",
        success: function() {
          if(components[i] === "MapDisplay") {
            mapDisplay = new MapDisplay();
          } else if(components[i] === "LayerExplorer") {
            layerExplorer = new LayerExplorer(_this);
          } else if(components[i] === "ToolBox") {
            toolBox = new ToolBox(_this);
          } else if(components[i] === "LeftBar") {
            leftBar = new LeftBar(_this);
          }

          _this.injectStylesheet(terrama2Url + "/stylesheets/components/" + config.getConfJsonComponentsCss()[components[i]]);

          loadComponents(++i);
        }
      });
    } else {
      return;
    }
  }

  $.ajax({
    url: terrama2Url + "/javascripts/config.terrama2.js",
    dataType: "script",
    success: function() {
      config = new Config(_this);
      config.loadConfigurations();

      loadComponents(0);

      $.ajax({ url: terrama2Url + "/socket.io/socket.io.js", dataType: "script" });
    }
  });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><div style="margin-left: 20px;"><h2>Root</h2><ul><li><a href="Config.html">Config</a></li><li><a href="TerraMA2.html">TerraMA2</a></li></ul></div><div style="margin-left: 20px;"><h2>components</h2><ul><li><a href="LayerExplorer.html">LayerExplorer</a></li><li><a href="LeftBar.html">LeftBar</a></li><li><a href="MapDisplay.html">MapDisplay</a></li><li><a href="ToolBox.html">ToolBox</a></li></ul></div>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Jan 13 2016 11:53:08 GMT-0200 (BRST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

{% extends "../base/layout.html" %}

{% set tabActive = "status" %}

{% block ngApp %}ng-app="terrama2.projects.status"{% endblock %}

{% block title %} TerraMA2 {{ __('Project Status')}} {% endblock %}

{% block javascripts %}

<script src="/externals/angular/angular.min.js"></script>
<script src="/externals/angular/i18n-angular.min.js"></script>
<script src="/javascripts/angular/app.js"></script>
<script src="/javascripts/angular/table/table.js"></script>
<script>
  angular.module('terrama2.projects.status', ['terrama2.table'])
    .controller("ListController", ['$scope', function($scope) {
      $scope.model = [
        {
          name: "Service",
          message: "Could not start service",
          date: '12/03/2016 12:00',
          type: 'Service',
          status: 'Error'
        },
        {
          name: "An_1",
          message: "Error accessing \"DataXXX\"",
          date: '12/03/2016 12:30',
          type: 'Analysis',
          status: 'Error'
        },
        {
          name: "Collector 2324",
          message: "No data collected",
          date: '12/03/2016 14:30',
          type: 'Collector',
          status: 'NoDataCollected'
        }
      ];

      $scope.fields = ['name', 'message', 'date'];

      $scope.link = function(object) {
        return "";
      };

      $scope.iconFn = function(object) {
        if (object.status === 'Error')
          return "fa fa-remove label-danger";
        if (object.status === 'NoDataCollected')
          return "fa fa-warning label-warning";
      };

      $scope.iconProperties = {
        type: "icon"
      };
    }]);
</script>

{% endblock %}

{% block content %}

<div class="col-md-12" ng-controller="ListController">
  <div class="box">
    <div class="box-header with-border">
      <h3 class="box-title">{[ __("Status") ]}</h3>
    </div><!-- /.box-header -->

    <div class="box-body">

      <div class="col-md-12">
        <terrama2-table fields="fields" model="model" link="link" icon="iconFn" icon-properties="iconProperties"></terrama2-table>
      </div>

    </div><!-- /.box-body -->

  </div><!-- /.box -->

</div> <!-- end col md 12 -->

{% endblock %}
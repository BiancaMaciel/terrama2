{% extends "../base/layout.html" %}

{% block styles %}
    <link rel="stylesheet" type="text/css" href="/externals/bootstrap/css/bootstrap-datetimepicker.css">
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="/externals/moment/moment.js"></script>
    <script type="text/javascript" src="/externals/bootstrap/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript" src="/javascripts/terrama2.js"></script>
    <script type="text/javascript" src="/externals/bootstrap/js/jquery.bootstrap.wizard.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){
        $("#mask-list").on("click", "li", function(e){
            $("#mask").val($("#mask").val() + $(this).children().text().substring(0, 2));
        });

        $('#datetimepicker6').datetimepicker({
            widgetPositioning: {vertical: "bottom"},
            format: 'DD-MM-YY HH:mm'
        });
        $('#datetimepicker7').datetimepicker({
            widgetPositioning: {vertical: "bottom"},
            format: 'DD-MM-YY HH:mm',
            useCurrent: false
        });
        $("#datetimepicker6").on("dp.change", function (e) {
            $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
        });
        $("#datetimepicker7").on("dp.change", function (e) {
            $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
        });

        $("#themeCombobox").change(function(e){
            var index = $('option:selected',$(this)).index();
            if (index == 0)
            {
                $("#staticComboDiv").removeClass("hidden");
                $("#intersectionTable th").eq(0).text("Attribute");
            }
            else
            {
                $("#staticComboDiv").addClass("hidden");
                $("#intersectionTable th").eq(0).text("Name");
            }
        });

        $('#rootwizard').bootstrapWizard(
            {
                onNext: function(tab, navigation, index) {
                    // validation
                    $(tab).find("a").append("<i class=\"fa fa-check\" style=\"margin-left: 5px;\"></i>");
                },
                onTabShow: function(tab, navigation, index) {
                    var $total = navigation.find('li').length;
                    var $current = index+1;
                    var $percent = ($current/$total) * 100;
                    $('#rootwizard .progress-bar').css({width:$percent+'%'});

                    if($current >= $total)
                    {
                        $('#rootwizard').find('.pager .next').hide();
                        $('#rootwizard').find('.pager .finish').show();
                        $('#rootwizard').find('.pager .finish').removeClass("disabled");
                    }
                    else
                    {
                        $('#rootwizard').find('.pager .next').show();
                        $('#rootwizard').find('.pager .finish').hide();
                    }
                }
            }
        );

        $('#rootwizard .finish').click(function() {
            alert('Finished!, Starting over!');
            $('#initial').trigger('click');
        })
    });
    </script>
{% endblock %}

{% block title %} TerraMA2 {{ __('Data Occurrence Registration') }} {% endblock %}

{% block content %}
    <div class="col-md-12" ng-app="terrama2">
        <div class="box box-default" ng-controller="datasetWizardController">
            <div class="box-header with-border">
                <h3 class="box-title">{{ __('Data Occurrence Registration') }}</h3>
            </div>
            <!-- /.box-header -->
            <div style="display: block;" class="box-body">

                <div id="rootwizard">
                    <div class="navbar">
                        <div class="navbar-inner">
                            <div class="container">
                                <ul class="terrama2-wizard">
                                    <li id="initial"><a href="#tab1" data-toggle="tab">Dados Gerais</a></li>
                                    <li><a href="#tab2" data-toggle="tab">Par√¢metros</a></li>
                                    <li><a href="#tab3" data-toggle="tab">Filtros</a></li>

                                    <!-- temp code for angular -->
                                    <!-- <dataset-wizard dataset="dataset"></dataset-wizard> -->
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div id="bar" class="progress progress-xs active">
                        <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane" id="tab1">
                            <!-- General Data Component -->
                            {% include "../base/generalData.html" with configuration %}
                        </div>
                        <div class="tab-pane" id="tab2">
                            <!-- Parameters Component -->
                            {% include "../base/parametersData.html" with configuration %}
                        </div>
                        <div class="tab-pane" id="tab3">
                            <div class="row">
                                <div class="col-md-12">

                                    <ul class="nav nav-tabs" data-tabs="tabs">
                                        <li class="active"><a data-toggle="tab" href="#filterDateTab">{{ __('Date') }}</a></li>
                                        <li><a data-toggle="tab" href="#filterAreaTab">{{ __('Area') }}</a></li>
                                        <li><a data-toggle="tab" href="#filterPreAnalysisTab">{{ __('Pre-Analysis') }}</a></li>
                                        <li><a data-toggle="tab" href="#filterBandTab">{{ __('Bands') }}</a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="filterDateTab">
                                            <div class="col-md-12">
                                                <p></p>
                                                <div class='col-md-6'>
                                                    <div class="form-group">
                                                        <label>{{ __('Ignores data previous to') }}:</label>
                                                        <div class='input-group date' id='datetimepicker6'>
                                                            <input type='text' class="form-control" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class='col-md-6'>
                                                    <div class="form-group">
                                                        <label>{{ __('Ignores data after to') }}:</label>
                                                        <div class='input-group date' id='datetimepicker7'>
                                                            <input type='text' class="form-control" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <!-- ./form-group -->
                                                </div>
                                                <!-- ./col-md-6 -->
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="filterAreaTab">
                                            <div class="col-md-12">
                                                <p></p>
                                                <div class='col-md-12'>
                                                    <div class="form-group">
                                                        <label>{{ __('Select the filter area type') }}:</label>
                                                        <select class="form-control" id="filterAreaCombobox">
                                                            <option selected>Do not filter</option>
                                                            <option>Filter by limits</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- ./col-md-12 -->
                                        </div>
                                        <div class="tab-pane" id="filterPreAnalysisTab">
                                            <div class="col-md-12">
                                                <p></p>
                                                <div class='col-md-12'>

                                                    <div class="form-group">
                                                        <div class="radio">
                                                            <label>
                                                            <input name="optionsRadios" id="doNotMakePreAnalysis" value="option1" checked="true" type="radio">
                                                                {{ __('Do not make pre-analysis') }}
                                                            </label>
                                                        </div>
                                                    </div>

                                                </div>
                                                <!-- ./col-md-12 -->

                                                <div class="col-md-8">
                                                    <div class="form-group">
                                                        <div class="radio">
                                                            <label>
                                                            <input name="optionsRadios" id="cutByArea" value="option1" type="radio">
                                                                {{ __('Ignores all data <b>LESS</b> than') }}:
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-8 -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <input class="form-control" id="name" placeholder="" type="text">
                                                    </div>
                                                </div>
                                                <!-- ./col-md-4 -->

                                                <div class='col-md-8'>
                                                    <div class="form-group">
                                                        <div class="radio">
                                                            <label>
                                                            <input name="optionsRadios" id="cutByLimits" value="option1" type="radio">
                                                                {{ __('Ignores all data <b>GREATER</b> than') }}:
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-8 -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <input class="form-control" id="name" placeholder="" type="text">
                                                    </div>
                                                </div>
                                                <!-- ./col-md-4 -->

                                                <div class='col-md-8'>
                                                    <div class="form-group">
                                                        <div class="radio">
                                                            <label>
                                                            <input name="optionsRadios" id="cutByLimits" value="option1" type="radio">
                                                                {{ __('Ignores if average is <b>LESS</b> than') }}:
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-8 -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <input class="form-control" id="name" placeholder="" type="text">
                                                    </div>
                                                </div>
                                                <!-- ./col-md-4 -->

                                                <div class='col-md-8'>
                                                    <div class="form-group">
                                                        <div class="radio">
                                                            <label>
                                                            <input name="optionsRadios" id="cutByLimits" value="option1" type="radio">
                                                                {{ __('Ignores if average is <b>GREATER</b> than') }}:
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-8 -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <input class="form-control" id="name" placeholder="" type="text">
                                                    </div>
                                                </div>
                                                <!-- ./col-md-4 -->

                                                <div class='col-md-12'>
                                                    <div class="form-group">
                                                        <label>
                                                        <input name="optionsRadios" id="cutByLimits" value="option1" type="checkbox">
                                                            {{ __('Analyse only data inside selected plan') }}:
                                                        </label>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-12 -->

                                                <div class='col-md-12'>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="selectPlans"></textarea>
                                                    </div>
                                                </div>
                                                <!-- ./col-md-12 -->
                                            </div> 
                                            <!-- /.col-md-12 -->
                                        </div>
                                        <div class="tab-pane" id="filterBandTab">
                                            <div class="col-md-12">
                                                <p></p>
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>{{ __('Bands to be skipped') }}:</label>
                                                        <input class="form-control" id="bands" type="text">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- ./col-md-12 -->
                                        </div>
                                    </div>
                                    <!-- ./tab-content -->
                                </div>
                                <!-- ./col-md-12 -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <ul class="pager wizard">
                            <li class="previous first" style="display:none;"><a href="#">First</a></li>
                            <li class="previous"><a href="#">Previous</a></li>
                            <li class="next"><a href="#">Next</a></li>
                            <li class="next finish" style="display:none;"><a href="javascript:;">Finish</a></li>
                        </ul>
                    </div>
                </div>

            </div>
            <!-- /.box body -->
        </div>
    </div> <!-- end col md 12 -->

{% endblock %}
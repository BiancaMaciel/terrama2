<div id="rootwizard">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="terrama2-wizard">
          <li id="initial">
            <a href="#tab1" data-toggle="tab">
              <i class="fa fa-asterisk" style="color: #a94442; font-size: 12px"></i>
              {{ i18n.__("General Data") }}
              <i id="iStatus"></i>
            </a>
          </li>
          <li>
            <a href="#tab2" data-toggle="tab">
              <i class="fa fa-asterisk" style="color: #a94442; font-size: 12px"></i>
              {{ i18n.__("Parameters") }}
              <i id="iStatus"></i>
            </a>
          </li>
          <li>
            <a href="#tab3" data-toggle="tab">
              {{ i18n.__("Filter") }}
              <i id="iStatus"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="bar" class="progress progress-xs active">
    <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
  </div>

  <div class="tab-content">
    <div class="tab-pane" id="tab1">

      <div ng-include="'/javascripts/angular/generalData.html'"></div>
    </div>
    <div class="tab-pane" id="tab2">

      <div ng-include="'/javascripts/angular/parametersData.html'"></div>
    </div>
    <div class="tab-pane" id="tab3">
      <div ng-include="'/javascripts/angular/filter.html'"></div>
    </div>
    <ul class="pager wizard">
      <li class="previous first" style="display:none;"><a href="#">First</a></li>
      <li class="previous"><a href="#">Previous</a></li>
      <li class="next"><a href="#">Next</a></li>
      <li class="next finish" style="display:none;">
        <a href="javascript:;" ng-click="save()">Finish</a>
      </li>
    </ul>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $("#mask-list").on("click", "li", function(e){
      $("#mask").val($("#mask").val() + $(this).children().text().substring(0, 2));
    });

    $('#datetimepicker6').datetimepicker({
      widgetPositioning: {vertical: "bottom"},
      format: 'DD-MM-YY HH:mm'
    });
    $('#datetimepicker7').datetimepicker({
      widgetPositioning: {vertical: "bottom"},
      format: 'DD-MM-YY HH:mm',
      useCurrent: false
    });
    $("#datetimepicker6").on("dp.change", function (e) {
      $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
    });
    $("#datetimepicker7").on("dp.change", function (e) {
      $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
    });

    $("#themeCombobox").change(function(e){
      var index = $('option:selected',$(this)).index();
      if (index == 0)
      {
        $("#staticComboDiv").removeClass("hidden");
        $("#intersectionTable th").eq(0).text("Attribute");
      }
      else
      {
        $("#staticComboDiv").addClass("hidden");
        $("#intersectionTable th").eq(0).text("Name");
      }
    });

    $('#rootwizard').bootstrapWizard(
      {'tabClass': 'nav nav-pills wizard',
        onNext: function(tab, navigation, index) {
          // validation
          var a = $(tab).find("a");
          a.find("i").first().removeClass("fa fa-asterisk");

          a.find("i[id='iStatus']").addClass("fa fa-check");
        },
        onTabShow: function(tab, navigation, index) {
          var $total = navigation.find('li').length;
          var $current = index+1;
          var $percent = ($current/$total) * 100;
          $('#rootwizard .progress-bar').css({width:$percent+'%'});

          if($current >= $total)
          {
            $('#rootwizard').find('.pager .next').hide();
            $('#rootwizard').find('.pager .finish').show();
            $('#rootwizard').find('.pager .finish').removeClass("disabled");
          }
          else
          {
            $('#rootwizard').find('.pager .next').show();
            $('#rootwizard').find('.pager .finish').hide();
          }
        }
      }
    );

//    $('#rootwizard .finish').click(function() {
//      alert('Finished!, Starting over!');
//      // $('#initial').trigger('click');
//      console.log($('#rootwizard'));
//      $('#rootwizard').find("a[href*='tab1']").trigger('click');
//    });
  });
</script>